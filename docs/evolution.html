<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Evolution of Autograph · Autograph</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Spongiform (October 18, 2018)"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Evolution of Autograph · Autograph"/><meta property="og:type" content="website"/><meta property="og:url" content="https://autograph.dev//"/><meta property="og:description" content="## Spongiform (October 18, 2018)"/><meta property="og:image" content="https://autograph.dev/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://autograph.dev/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://autograph.dev/blog/atom.xml" title="Autograph Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://autograph.dev/blog/feed.xml" title="Autograph Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/favicon.ico" alt="Autograph"/><h2 class="headerTitleWithLogo">Autograph</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavItemActive"><a href="/docs/evolution" target="_self">Getting Started</a></li><li class=""><a href="/docs/api" target="_self">API</a></li><li class=""><a href="/help" target="_self">Help</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Evolution of Autograph</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="spongiform-october-18-2018"></a><a href="#spongiform-october-18-2018" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Spongiform (October 18, 2018)</h2>
<blockquote>
<p>Being a modern react developer is repetitive and repetitive.
You have to specify your schema once for your database.
Write it again as a GraphQL schema.
Write it again to bind your database to your GraphQL resolvers.
You've gotta write part of it again to define a GraphQL query.
And you've got to restate it in your own words in code to read from the query object.
And if you've decided to use TypeScript, then you've got to write everything out one more time.
Congrats, you've basically done the same mindless and tedious task six times.
Might as well have some brain-eating prion disease or something.</p>
</blockquote>
<pre><code class="hljs css language-jsx"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params">{ user }: { user: User }</span>)</span>{
    <span class="hljs-keyword">return</span> &lt;div&gt;
        &lt;p&gt;Welcome, {user.name}&lt;/p&gt;
        
        &lt;h3&gt;Friends, Romans, and Countrymen:&lt;/h3&gt;
        &lt;UserList users={user.friends} /&gt;
        
        &lt;h3&gt;Posts:&lt;/h3&gt;
        &lt;PostList posts={user.posts} /&gt;

        &lt;h3&gt;Photos:&lt;/h3&gt;
        &lt;PhotoList photos={user.photos} /&gt;
    &lt;/div&gt;
}

renderWithData(
    &lt;App user={Me()} /&gt;, 
    document.getElementById("root"))
</code></pre>
<p>Features:</p>
<ul>
<li>Typescript, including a snippet that automatically generates corresponding typescript definitions</li>
<li><code>renderWithData</code> triggers a &quot;pseudo render&quot; that figures out what data is needed and then renders with data once it has loaded</li>
<li>Not actual GraphQL, but inspired by it</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="autograph-render-prop-experiment-october-20-2018"></a><a href="#autograph-render-prop-experiment-october-20-2018" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Autograph Render Prop Experiment (October 20, 2018)</h2>
<p>No longer needs a special <code>render</code> function, instead it's just a regular render prop component. This was largely a prototype.</p>
<p>Note that Autograph does a pseudo render for each render of the main component.</p>
<pre><code class="hljs css language-jsx"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">return</span> &lt;Autograph 
        url="https://graphql-pokemon.now.sh/graphql"
        render={
            (Query: QueryType) =&gt; 
                &lt;Demo pokemon={Query.pokemon({ name: 'pikachu' })} /&gt;
        } /&gt;
}

function Demo({ pokemon }: { pokemon: GQL.Pokemon }){
    return &lt;div&gt;
        &lt;h1&gt;{pokemon.number} - {pokemon.name}&lt;/h1&gt;
        &lt;img src={pokemon.image} /&gt;
        &lt;div&gt;Types:&lt;/div&gt;
        &lt;ul&gt;{pokemon.types.map(k =&gt; 
            &lt;li key={k}&gt;{k}&lt;/li&gt;)}&lt;/ul&gt;
    &lt;/div&gt;
}

ReactDOM.render(&lt;App /&gt;, document.getElementById('root'))
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="autograph-suspense-experiment-october-20-2018"></a><a href="#autograph-suspense-experiment-october-20-2018" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Autograph Suspense Experiment (October 20, 2018)</h2>
<p>This is the first experiment which uses React Suspense to display fallback loading indicators.</p>
<pre><code class="hljs css language-jsx"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Placeholder</span> <span class="hljs-attr">delayMs</span>=<span class="hljs-string">{100}</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>Loading....<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>welcome to the async react future <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">AutographSuspense</span> 
                <span class="hljs-attr">url</span>=<span class="hljs-string">"https://graphql-pokemon.now.sh/graphql"</span>
                <span class="hljs-attr">render</span>=<span class="hljs-string">{(Query:</span> <span class="hljs-attr">GQL.Query</span>) =&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    {Query.pokemon({ name: 'pikachu'}).name}
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
            /&gt;
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Placeholder</span>&gt;</span>
    
}    

ReactDOM.render(<span class="hljs-tag">&lt;<span class="hljs-name">AsyncMode</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">AsyncMode</span>&gt;</span>, document.getElementById('root'))
</span></code></pre>
<h2><a class="anchor" aria-hidden="true" id="render-prop-children-october-21-2018"></a><a href="#render-prop-children-october-21-2018" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Render Prop Children (October 21, 2018)</h2>
<p>Switched from prop named <code>render</code> to render prop function as children.</p>
<pre><code class="hljs css language-jsx">ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Autograph</span> <span class="hljs-attr">url</span>=<span class="hljs-string">{GQL.url}</span>&gt;</span>{
    (Query: GQL.Query) =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">App</span> <span class="hljs-attr">Query</span>=<span class="hljs-string">{Query}</span> /&gt;</span>
}<span class="hljs-tag">&lt;/<span class="hljs-name">Autograph</span>&gt;</span>, document.getElementById('root'))
</span></code></pre>
<h2><a class="anchor" aria-hidden="true" id="higher-order-component-decorator-october-21-2018"></a><a href="#higher-order-component-decorator-october-21-2018" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Higher Order Component Decorator (October 21, 2018)</h2>
<pre><code class="hljs css language-jsx">@AutographHOC2(GQL.url)
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    render(){
        <span class="hljs-keyword">let</span> Query: GQL.Query = (<span class="hljs-keyword">this</span>.props <span class="hljs-keyword">as</span> any).Query;
    }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="error-and-loading-pseudofields-october-22-2018"></a><a href="#error-and-loading-pseudofields-october-22-2018" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error and Loading Pseudofields (October 22, 2018)</h2>
<p>We could even detect automatically when <code>__error</code> and <code>__loading</code> were used so that we sould only render them if we knew that they existed.</p>
<pre><code class="hljs css language-jsx">    &lt;Autograph&gt;{
        Query =&gt; {
            if(Query.__error) return &lt;p&gt;Error&lt;/p&gt;;
            if(Query.__loading) return &lt;p&gt;Loading&lt;/p&gt;;
            
            return Query.rates({ currency: "USD" }).map(({ currency, rate }) =&gt; 
                &lt;div key={currency}&gt;
                    &lt;p&gt;{currency}: {rate}&lt;/p&gt;
                &lt;/div&gt;
            )
        }
    }&lt;/Autograph&gt;

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="hooks-style-interface-october-27-2018"></a><a href="#hooks-style-interface-october-27-2018" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hooks Style Interface (October 27, 2018)</h2>
<pre><code class="hljs css language-jsx"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params">props</span>)</span>{
    <span class="hljs-keyword">let</span> query: GQL.Query = useQuery(App, props)
    <span class="hljs-keyword">let</span> block = query.block({ <span class="hljs-attr">number</span>: <span class="hljs-number">5450945</span> })

    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">fieldset</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">legend</span>&gt;</span>Block {block.hash}<span class="hljs-tag">&lt;/<span class="hljs-name">legend</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>Miner<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{block.miner.address}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>Number<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{block.number}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">fieldset</span>&gt;</span></span>
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="amb-experiment-december-25-2018"></a><a href="#amb-experiment-december-25-2018" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Amb Experiment (December 25, 2018)</h2>
<p>But, by wrapping conditionals, we can then explore all the control flow possibilities. Keep in mind that the function will be executed once for every possible configuration of the branching conditions. That means that if you have <code>N</code> independent conditionals, your function may be executed <code>2^N</code> times. Fortunately most rendering code doesn't need to branch that much.</p>
<pre><code class="hljs css language-jsx"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Example</span>(<span class="hljs-params">{ item }</span>)</span>{
    <span class="hljs-keyword">if</span>(amb(state.type == <span class="hljs-string">'person'</span>)){
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{item.name} ({item.age})<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    }<span class="hljs-keyword">else</span>{
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{item.type}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="metastate-april-30-2019"></a><a href="#metastate-april-30-2019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Metastate (April 30, 2019)</h2>
<p>Features:</p>
<ul>
<li>New reimplementation of fiber internals allows it to read from react hooks and child component state.</li>
<li>New small prototype meant to serve as a general API test platform (not real GraphQL)</li>
<li>Based on React Hooks</li>
</ul>
<pre><code class="hljs css language-jsx"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Widget</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">let</span> data = useMetastate(cachedFetcher);
    <span class="hljs-keyword">let</span> [ count, setCount ] = useState(<span class="hljs-number">0</span>)

    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{e</span> =&gt;</span> setCount(count + 1)}&gt;
            + Increment {data.get(count)}
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="lazy-metastate-may-3-2019"></a><a href="#lazy-metastate-may-3-2019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Lazy Metastate (May 3, 2019)</h2>
<p>Features:</p>
<ul>
<li>Switched implementation to be lazy o that no virtual renders have to be done until it detects that it's missing data</li>
<li>This means that most of the time the app is rendered, no virtual render has to take place</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="builtin-suspense-api-may-17-2019"></a><a href="#builtin-suspense-api-may-17-2019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Builtin Suspense API (May 17, 2019)</h2>
<pre><code class="hljs css language-jsx">    &lt;Autograph&gt;{query =&gt; }&lt;/Autograph&gt;
    &lt;Autograph fallback={&lt;div&gt;Loading...&lt;/div&gt;}&gt;{query =&gt; }&lt;/Autograph&gt;
    &lt;Suspense fallback={&lt;div&gt;Loading...&lt;/div&gt;}&gt;&lt;Autograph fallback={null}&gt;{query =&gt; }&lt;/Autograph&gt;&lt;/Suspense&gt;
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="durable-state-may-17-2019"></a><a href="#durable-state-may-17-2019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Durable State (May 17, 2019)</h2>
<p>For many data fetching tasks we would like to store a per instance cached value inside the state of a component instance. however, this is not possible with Suspense because if the render is aborted, the state is never stored, and it is impossible for components to then interact with a previous version of itself.</p>
<p>Durable State is a special react hook that stores data in an external cache and reads fields from the react internals to maintain consistency.</p>
<h2><a class="anchor" aria-hidden="true" id="inline-fallbacks-may-18-2019"></a><a href="#inline-fallbacks-may-18-2019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inline Fallbacks (May 18, 2019)</h2>
<pre><code class="hljs css language-jsx">&lt;InlineFallback&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LoadingDemo</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">InlineFallback</span>&gt;</span></span>


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">LoadingDemo</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">get</span> = usePrimer(fetchData)
    let [ x, setX ] = useState(42)
    let isLoading = <span class="hljs-keyword">get</span>('_loading');

    return &lt;div&gt;
        {<span class="hljs-keyword">get</span>('message1')}&lt;button onClick={e =&gt; setX(x + <span class="hljs-number">1</span>)}&gt;{isLoading ? <span class="hljs-string">'(loading)'</span> : (<span class="hljs-keyword">get</span>(x) || x)}&lt;/button&gt;
        &lt;p&gt;{<span class="hljs-keyword">get</span>('time')}&lt;/p&gt;
    &lt;/div&gt;
}

</code></pre>
<p>This allows us to have a component act as its own loading indicator. This is done by wrapping our target component with something that consumes and subsequently re-emits the query object and also functions as a suspense boundary.</p>
<p>note that hooks don't get loaded with the same value when running in the inline fallback mode</p>
<p>This is pretty weird because the behavior is actually dictated by how a component is mounted as opposed to somethign about the component itself. Ideally whether or not a component uses suspense ought to be something that can be determined for each particular component.</p>
<h2><a class="anchor" aria-hidden="true" id="minimal-external-state-may-21-2019"></a><a href="#minimal-external-state-may-21-2019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Minimal External State (May 21, 2019)</h2>
<p>Durable state was then removed on May 17 in favor of a simpler persistence scheme.</p>
<pre><code class="hljs css language-jsx"><span class="hljs-keyword">const</span> agClient = Autograph.createClient(URL)

ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Autograph.Provider</span> <span class="hljs-attr">client</span>=<span class="hljs-string">{agClient}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Autograph.provider</span>&gt;</span></span>, <span class="hljs-built_in">document</span>.getElmentById(<span class="hljs-string">'root'</span>))
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="explicit-loading-error-handler-june-2-2019"></a><a href="#explicit-loading-error-handler-june-2-2019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Explicit Loading/Error Handler (June 2, 2019)</h2>
<p>Handle loading states by checking for <code>Query._loading</code>— this shoudl make it easier to port existing codebases, for instance that use Apollo.</p>
<p>This means that we don't need to use React Concurrent Mode— instead we effectively only use a zero-delay Suspense in order to abort a render.</p>
<pre><code class="hljs css language-jsx"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">NoSuspense</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">get</span> = usePrimer()
    let [ x, setX ] = useState(42)

    if(<span class="hljs-keyword">get</span>('_error')) return &lt;div&gt;HELP HELP WE HAVE ERROR HELP&lt;/div&gt;;
    if(<span class="hljs-keyword">get</span>('_loading')) return &lt;div&gt;Loaidng (no suspense)&lt;/div&gt;;

    return &lt;div&gt;
        {<span class="hljs-keyword">get</span>('message1')}&lt;button onClick={e =&gt; setX(x + <span class="hljs-number">1</span>)}&gt;{<span class="hljs-keyword">get</span>(x) || x}&lt;/button&gt;
        &lt;p&gt;{<span class="hljs-keyword">get</span>('time')}&lt;/p&gt;
    &lt;/div&gt;
}
</code></pre>
<p>It still remains to be seen how to make this behavior harmonize with Suspense an Error boundaries if we want to be able to handle fetching errors and loading states with these mechanisms.</p>
<p>because of this as the default behavior, suspense never actually triggers for more than a single frame (it's only ever used to immediately abort and retry a render fiber). thus we don't actually need stable concurrentmode to ship this library.</p>
<h2><a class="anchor" aria-hidden="true" id="multiple-queries-per-autogrpah-root-june-2-2019"></a><a href="#multiple-queries-per-autogrpah-root-june-2-2019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multiple Queries per Autogrpah Root (June 2, 2019)</h2>
<p>This version introduces &quot;loading groups&quot; that allow different queries to be separated within a single Autograph root.</p>
<pre><code class="hljs css language-jsx"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">NoSuspense3</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">let</span> get1 = usePrimer(<span class="hljs-string">'B'</span>)
    <span class="hljs-keyword">let</span> get2 = usePrimer(<span class="hljs-string">'A'</span>)
    <span class="hljs-keyword">let</span> [ x, setX ] = useState(<span class="hljs-number">42</span>)

    <span class="hljs-keyword">if</span>(get1(<span class="hljs-string">'_error'</span>)) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>[GET 1] HELP HELP WE HAVE ERROR HELP<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
    <span class="hljs-keyword">if</span>(get1(<span class="hljs-string">'_loading'</span>)) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>[GET 1] Loaidng (no suspense)<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;

    <span class="hljs-keyword">if</span>(get2(<span class="hljs-string">'_error'</span>)) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>[GET 2] HELP HELP WE HAVE ERROR HELP<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
    <span class="hljs-keyword">if</span>(get2(<span class="hljs-string">'_loading'</span>)) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>[GET 2] Loaidng (no suspense)<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;

    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            GET1: {get1('message1')}<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{e</span> =&gt;</span> setX(x + 1)}&gt;{get1(x) || x}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{get1('time')}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            GET2: {get2('message2')}<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{e</span> =&gt;</span> setX(x + 1)}&gt;{get2(x) || x}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{get2('time')}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>The only problem with this system is that the entire app gets re-rendered each time any query or loading group has a status change. this can likely be addressed with <code>shouldComponentUpdate</code> and <code>React.memo</code>.</p>
<p>However, maybe we should have <code>usePrimer</code> register some sort of update callback.</p>
<h2><a class="anchor" aria-hidden="true" id="suspense-for-loading-groups-june-3-2019"></a><a href="#suspense-for-loading-groups-june-3-2019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Suspense for Loading groups (June 3, 2019)</h2>
<pre><code class="hljs css language-jsx">type Query = QueryS &amp; {
    <span class="hljs-attr">_loading</span>: boolean
    _error: any
}

type QueryS {
    <span class="hljs-attr">__typename</span>: string
}

<span class="hljs-keyword">let</span> query: Query = usePrimer(loadingGroup)

<span class="hljs-keyword">let</span> querySuspense: QueryS = usePrimerS(loadingGroup)
</code></pre>
<p>This allows suspense and non-suspense apis to play nicely together. We have pretty much the ideal behavior where the default makes it easy to port things over from systems like Apollo and Relay. We have a version of suspense that can be opt-in one component at a time without adversely affecting siblings.</p>
<p>There should exist suspense and non-suspense version of the query endpoint. The non-suspense version includes <code>_error</code> and <code>_loading</code> properties. Suspense uses error boundaries and suspense placeholders respectively to handle these states.</p>
<h2><a class="anchor" aria-hidden="true" id="isolated-loading-group-rendering-june-3-2019"></a><a href="#isolated-loading-group-rendering-june-3-2019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Isolated Loading Group Rendering (June 3, 2019)</h2>
<p>The main problem with having multiple loading groups within a single autograph root is that every time something on the page (in any loading group) is fetched or reloaded, the entire page needed to be rendered.</p>
<p>Another issue is that if any of the components on the page had React.memo or shouldComponentUpdate, then new data wouldn't properly propagate down.</p>
<p>With this update we use the same trick that Redux-React and other state management systems use— which allows us to subscribe particular components to state updates. This update makes it so that children which are shadowed by <code>shouldComponentUpdate</code> will still update automatically when changes occur.</p>
<h2><a class="anchor" aria-hidden="true" id="dry-flag-june-3-2019"></a><a href="#dry-flag-june-3-2019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dry Flag (June 3, 2019)</h2>
<p>Similar to <code>_error</code> and <code>_loading</code> there's now <code>_dry</code> which is a pseudo-field which only works during certain conditions.</p>
<pre><code class="hljs css language-jsx"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">NoSuspense</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">get</span> = usePrimer()
    let [ x, setX ] = useState(42)

    if(<span class="hljs-keyword">get</span>('_error')) return &lt;div&gt;HELP HELP WE HAVE ERROR HELP&lt;/div&gt;;
    if(<span class="hljs-keyword">get</span>('_loading')) return &lt;div&gt;Loaidng (no suspense)&lt;/div&gt;;
    if(!<span class="hljs-keyword">get</span>('_dry')){
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'do some side effect that shouldnt occur during the real thing'</span>)
    }

    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        {get('message1')}<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{e</span> =&gt;</span> setX(x + 1)}&gt;{get(x) || x}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{get('time')}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>Maybe we should consider switching it to something like <code>_real</code> which represents the inverse, because it's probably more likely that someone is interested in doing something when it isn't a dry run.</p>
<p>Current Features:</p>
<ul>
<li>No need to manually write GraphQL queries</li>
<li>Automatically generate TypeScript bindings</li>
<li>Uses only zero-delay suspense, which does not require concurrent mode, and goes back to React 16.6 (October 2018)</li>
<li>Only does a virtual render pass when it encounters missing data (similar to a page fault in CPUs) for practically zero performance overhead</li>
<li>Easy to port existing code that uses Relay or Apollo or URQL— loading states and error handling is trivial to port</li>
<li>Opt-in to concurrent mode and suspense for specific components</li>
<li>Loading groups / queries allow different components to separately requiest queries, and updates can pierce <code>shouldComponentUpdate</code> and <code>memo</code>.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="directives-june-13-2019"></a><a href="#directives-june-13-2019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Directives (June 13, 2019)</h2>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">D</span><span class="hljs-params">(<span class="hljs-string">'@skip(if: false)'</span>, query.getThing({})</span></span><span class="hljs-selector-class">.otherThing</span><span class="hljs-selector-class">.stuff</span>)
</code></pre>
<p>Compiles to:</p>
<pre><code class="hljs">{
    getThing {
        otherThing {
            stuff @skip(<span class="hljs-name">if:</span> <span class="hljs-literal">false</span>)
        }
    }
}
</code></pre>
<p>Directives can be applied to any part of the expression:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">D</span><span class="hljs-params">(<span class="hljs-string">'@skip(if: false)'</span>, query.getThing({})</span></span>)<span class="hljs-selector-class">.otherThing</span><span class="hljs-selector-class">.stuff</span>
</code></pre>
<p>The corresponding GQL would be:</p>
<pre><code class="hljs">{
    getThing @skip(<span class="hljs-name">if:</span> <span class="hljs-literal">false</span>) {
        otherThing {
            stuff 
        }
    }
}
</code></pre>
<p>Directives are a little bit weird because they need to wrap an expression directly as opposed to a variable that holds that value.</p>
<p>BAD:</p>
<pre><code class="hljs"><span class="hljs-keyword">let</span> x = query.get<span class="hljs-constructor">Thing({})</span>.otherThing.stuff
<span class="hljs-keyword">let</span> y = <span class="hljs-constructor">D('@<span class="hljs-params">skip</span>(<span class="hljs-params">if</span>: <span class="hljs-params">false</span>)</span>', x)

<span class="hljs-comment">// use both x and y</span>
</code></pre>
<p>This is because <code>D</code> actually mutates the query handle to record that that value has a directive attached.</p>
<h2><a class="anchor" aria-hidden="true" id="loading-guards-june-16-2019"></a><a href="#loading-guards-june-16-2019" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Loading Guards (June 16, 2019)</h2>
<p>How should we handle loading states?</p>
<p>We have a few options:</p>
<ul>
<li><p>Use suspense fallbacks</p>
<ul>
<li>&quot;Just Works&quot; because we have a top level suspense boundary, but this also means that the entire page gets unmounted when things load which is pretty bad for default behavior.</li>
</ul></li>
<li><p>Use render abort (throw nextFrame) and expect that the user handles <code>query._loading</code></p>
<ul>
<li>The entire page doesn't turn into a loading screen, but it may flash</li>
<li>Somewhat similar to how Apollo does it.</li>
</ul></li>
<li><p>Loading guards (inline fallbacks for pieces that need to be loaded)</p>
<ul>
<li>You have to teach people a weird loading paradigm</li>
</ul></li>
<li><p>Methods return undefined</p>
<ul>
<li>It's hard/annoying to distinguish between &quot;loading&quot; and loaded with null result</li>
</ul></li>
<li><p>Methods return LOADING</p>
<ul>
<li>You have to write code that deals with the possibilty that anything could be loading.</li>
</ul></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="future"></a><a href="#future" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Future?</h2>
<ul>
<li>Mutations</li>
<li>An API for triggering reloads of specific queries</li>
<li>Some way of specifying query options (e.g. cache-only etc.)?</li>
</ul>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#spongiform-october-18-2018">Spongiform (October 18, 2018)</a></li><li><a href="#autograph-render-prop-experiment-october-20-2018">Autograph Render Prop Experiment (October 20, 2018)</a></li><li><a href="#autograph-suspense-experiment-october-20-2018">Autograph Suspense Experiment (October 20, 2018)</a></li><li><a href="#render-prop-children-october-21-2018">Render Prop Children (October 21, 2018)</a></li><li><a href="#higher-order-component-decorator-october-21-2018">Higher Order Component Decorator (October 21, 2018)</a></li><li><a href="#error-and-loading-pseudofields-october-22-2018">Error and Loading Pseudofields (October 22, 2018)</a></li><li><a href="#hooks-style-interface-october-27-2018">Hooks Style Interface (October 27, 2018)</a></li><li><a href="#amb-experiment-december-25-2018">Amb Experiment (December 25, 2018)</a></li><li><a href="#metastate-april-30-2019">Metastate (April 30, 2019)</a></li><li><a href="#lazy-metastate-may-3-2019">Lazy Metastate (May 3, 2019)</a></li><li><a href="#builtin-suspense-api-may-17-2019">Builtin Suspense API (May 17, 2019)</a></li><li><a href="#durable-state-may-17-2019">Durable State (May 17, 2019)</a></li><li><a href="#inline-fallbacks-may-18-2019">Inline Fallbacks (May 18, 2019)</a></li><li><a href="#minimal-external-state-may-21-2019">Minimal External State (May 21, 2019)</a></li><li><a href="#explicit-loading-error-handler-june-2-2019">Explicit Loading/Error Handler (June 2, 2019)</a></li><li><a href="#multiple-queries-per-autogrpah-root-june-2-2019">Multiple Queries per Autogrpah Root (June 2, 2019)</a></li><li><a href="#suspense-for-loading-groups-june-3-2019">Suspense for Loading groups (June 3, 2019)</a></li><li><a href="#isolated-loading-group-rendering-june-3-2019">Isolated Loading Group Rendering (June 3, 2019)</a></li><li><a href="#dry-flag-june-3-2019">Dry Flag (June 3, 2019)</a></li><li><a href="#directives-june-13-2019">Directives (June 13, 2019)</a></li><li><a href="#loading-guards-june-16-2019">Loading Guards (June 16, 2019)</a></li><li><a href="#future">Future?</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/favicon.ico" alt="Autograph" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/docs/en/doc2.html">Guides (or other categories)</a><a href="/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/en/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 Kevin Kwok (antimatter15@gmail.com)</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '54be4fd9951c5488782ff92be33d9861',
                indexName: 'autograph',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>